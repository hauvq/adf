(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c428217c"],{"07a3":function(e,t,n){},"20d6":function(e,t,n){"use strict";var r=n("5ca1"),a=n("0a49")(6),i="findIndex",o=!0;i in[]&&Array(1)[i](function(){o=!1}),r(r.P+r.F*o,"Array",{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(i)},"512f":function(e,t,n){"use strict";var r=n("07a3"),a=n.n(r);a.a},6577:function(e,t,n){"use strict";var r=n("9a98"),a=n.n(r);t["default"]=a.a},"78cc":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("9225");function a(e){var t=e.isStr,n=e.enStr,a=e.fallback,i=void 0===a||a,o="en"===r["a"].locale?n:t;return i?o||("en"===r["a"].locale?t:n):o}},9870:function(e,t,n){"use strict";var r=n("b773"),a=n("7598");t["a"]={name:"openingHours",mixins:[r["a"]],computed:{openingHours:function(){var e=this.merchant||{},t=e.restaurant_opening_time,n=void 0===t?"":t,r=e.restaurant_open_date,i=void 0===r?"":r;return Object(a["d"])({restaurant_opening_time:n,restaurant_open_date:i})}}}},"9a98":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"en":{"lastOrderIn":"Last order in {minute} minutes"},"is":{"lastOrderIn":"Síðasta pöntun eftir {minute} mínútur"}}'),delete e.options._Ctor}},b773:function(e,t,n){"use strict";n("6762"),n("2fdb"),n("ac6a"),n("8615"),n("96cf");var r=n("3b8d"),a=(n("28a5"),n("bc3a")),i=n.n(a),o=n("1503");t["a"]={name:"merchant",data:function(){return{merchant:void 0,shipments:[]}},props:{existingMerchant:Object},computed:{availablePostCodes:function(){var e=this.merchant.price_by_postcode,t=e.split(",").map(function(e){return e.split(":")[0]});return t},supportPickupShipment:function(){return this.shipments.some(function(e){return e.deal_address===o["h"]})}},methods:{getMerchantInfo:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.id){e.next=2;break}return e.abrupt("return");case 2:return t=new URLSearchParams,t.append("service","seller_info"),t.append("id",this.id),t.append("shipments",1),e.next=8,i.a.post("/ws.php",t);case 8:return n=e.sent,r=n.data[0][0],this.merchant=r,this.shipments=Object.values(n.data[1]),e.abrupt("return",r);case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),checkValidPostalCode:function(e){return!!this.availablePostCodes.includes("*")||this.availablePostCodes.includes(e)}},watch:{id:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getMerchantInfo();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=this.merchant||this.existingMerchant,e.t0){e.next=5;break}return e.next=4,this.getMerchantInfo();case 4:e.t0=e.sent;case 5:this.merchant=e.t0;case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},f0f8:function(e,t,n){"use strict";n.d(t,"a",function(){return O});n("6762"),n("2fdb"),n("7514"),n("20d6");var r=n("75fc"),a=n("768b"),i=(n("55dd"),n("7598")),o=n("f23c"),c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],s=c.reduce(function(e,t,n){return e[t]=n,e},{});function u(e){var t=e.openingHours;return JSON.parse(JSON.stringify(t)).sort(function(e,t){var n=Object(a["a"])(e,2),r=n[0],o=n[1],c=Object(a["a"])(t,2),u=c[0],l=c[1],f=s[r]-s[u];return 0!==f?f:Object(i["g"])(o)-Object(i["g"])(l)})}function l(e){var t=e.openingHours,n=e.dayStr,o=u({openingHours:t}),c=Object(i["e"])(n)(o).reduce(function(e,t,n){var i=Object(a["a"])(t,3),o=i[1],c=i[2];if(0===n)return[].concat(Object(r["a"])(e),[t]);var s=Object(a["a"])(e[e.length-1],3),u=s[2];return u===o?(e[e.length-1][2]=c,e):[].concat(Object(r["a"])(e),[t])},[]);return c}function f(e){var t=e.openingHours,n=u({openingHours:t}),a=u({openingHours:c.reduce(function(e,t){return[].concat(Object(r["a"])(e),Object(r["a"])(l({openingHours:n,dayStr:t})))},[])});return a}function d(e){var t=e.openingHours,n=e.selectedDayStr,o=f({openingHours:t}),c=Object(i["e"])(n)(o)||[],s=c.length&&c.every(function(e){var t=Object(a["a"])(e,2),n=t[1];return"closed"!==n});if(s)return{selectedDayOpenHour:c,nextOpenTimeStr:c[0][1],nextOpenDayStr:c[0][0]};for(var u=o.findIndex(function(e){var t=Object(a["a"])(e,1),r=t[0];return r===n}),l=[].concat(Object(r["a"])(o.slice(u)),Object(r["a"])(o.slice(0,u))).filter(function(e){var t=Object(a["a"])(e,1),r=t[0];return r!==n}),d=null,p=null,h=0;h<l.length;h++){var m=Object(a["a"])(l[h],3),O=m[0],g=m[1];m[2];if("closed"!==g){d=g,p=O;break}}return{selectedDayOpenHour:c,nextOpenTimeStr:d,nextOpenDayStr:p}}function p(e){for(var t=e.openingHours,n=Object(i["i"])(0),o=f({openingHours:t}),c=o.findIndex(function(e){var t=Object(a["a"])(e,1),r=t[0];return r===n}),s=[].concat(Object(r["a"])(o.slice(c)),Object(r["a"])(o.slice(0,c))),u=null,l=null,d=function(e,t){return e===t||"00:00"===e&&"24:00"===t||"24:00"===e&&"00:00"===t},p=0;p<s.length-1;p++){var h=Object(a["a"])(s[p],3),m=h[0],O=(h[1],h[2]),g=Object(a["a"])(s[p+1],3),b=g[0],v=g[1],j=g[2];if(p!==s.length-2||d(j,s[0][1])||(u=j,l=b),!d(O,v)&&!d(O,v)){u=O,l=m;break}}return{nextCloseTimeStr:u,nextCloseDayStr:l}}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dayStr,n=e.timeStr;if(!t||!n)return null;var r=s[Object(i["i"])(0)],a=s[t],o=a>=r?a-r:7-r+a;return new Date(+Object(i["b"])(n)+864e5*o)}function m(e){var t=e.openingHours,n=Object(i["i"])(0),r=f({openingHours:Object(i["e"])(n)(t)||[]}),c=r.length&&r.find(function(e){var t=Object(a["a"])(e,3),n=t[1],r=t[2];return Object(i["g"])(n)<=Object(i["c"])()&&Object(i["c"])()<Object(i["g"])(r)}),s=!!r.length&&r.every(function(e){var t=Object(a["a"])(e,2),n=t[1];return"closed"!==n}),u=s&&!!c,l=Object(o["a"])(r,"".concat(r.length-1,".2")),d=s&&!u&&Object(i["c"])()<Object(i["g"])(l);return{todayStr:n,todayOpeningHour:r,currentOpenTime:c,isOpenToday:s,lastTodayCloseTime:l,willOpenToday:d,isOpen:u}}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.openingHours,n=void 0===t?[]:t,r={isOpen:!1,isOpenToday:!1,willOpenToday:!1,nextChangeTimeStr:null,nextChangeDayStr:null,nextChangeDate:null,todayOpeningHour:null},o=function(e){var t=e.dayStr,n=e.timeStr;r.nextChangeTimeStr=n,r.nextChangeDayStr=t,r.nextChangeDate=h({dayStr:t,timeStr:n})};if(n.every(function(e){return e.includes("closed")}))return r;var c=m({openingHours:n}),s=c.todayStr,u=c.todayOpeningHour,l=(c.currentOpenTime,c.isOpenToday),f=(c.lastTodayCloseTime,c.willOpenToday),O=c.isOpen;if(r.isOpenToday=l,r.isOpen=O,r.willOpenToday=f,r.todayOpeningHour=u,f){var g=u.find(function(e){var t=Object(a["a"])(e,2),n=t[1];return Object(i["c"])()<Object(i["g"])(n)})||[],b=Object(a["a"])(g,2),v=b[1];return o({dayStr:s,timeStr:v}),r}if(O){var j=p({openingHours:n,selectedDayStr:s}),y=j.nextCloseTimeStr,S=j.nextCloseDayStr;return o({dayStr:S,timeStr:y}),r}var x=d({openingHours:n,selectedDayStr:s}),T=x.nextOpenTimeStr,C=x.nextOpenDayStr;return o({dayStr:C,timeStr:T}),r}},f627:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isRestaurant&&e.isGoingToClose?n("div",{staticClass:"last-order-time-warn"},[e._v("\n  "+e._s(e.$t("lastOrderIn",{minute:e.remainingTime}))+"\n")]):e._e()},a=[],i=(n("c5f6"),n("9870")),o=n("f23c"),c=n("f0f8"),s=!1,u={name:"LastOderTimeWarning",mixins:[i["a"]],props:{id:Number},data:function(){return{remainingTime:30,isGoingToClose:!1}},computed:{isRestaurant:function(){return"Restaurants"===Object(o["a"])(this.merchant,"attribute_set_name")},nextStatusChange:function(){var e=this.openingHours;return Object(c["a"])({openingHours:e})}},methods:{calIsGoingToClose:function(){var e=this.merchant,t=this.nextStatusChange,n=t.isOpen,r=t.nextChangeDate;if(!n)return this.isGoingToClose=!1;var a=+r-6e4*Object(o["a"])(e,"last_order_time",30);return this.isGoingToClose=+a-18e5<=+new Date&&+new Date<+a},calTimeRemainingBeforeClose:function(){if(this.merchant){this.calIsGoingToClose();var e=6e4*Object(o["a"])(this.merchant,"last_order_time",30),t=this.nextStatusChange.nextChangeDate,n=+t-(+new Date+e);this.remainingTime=Math.floor(Math.max(0,n/6e4))}}},mounted:function(){this.calTimeRemainingBeforeClose(),this.timeRemainingTimer=setInterval(this.calTimeRemainingBeforeClose,s?3e3:6e4)},beforeDestroy:function(){clearInterval(this.timeRemainingTimer)},watch:{merchant:function(){this.calTimeRemainingBeforeClose()}}},l=u,f=(n("512f"),n("2877")),d=n("6577"),p=Object(f["a"])(l,r,a,!1,null,"5c77fb67",null);"function"===typeof d["default"]&&Object(d["default"])(p);t["a"]=p.exports}}]);
//# sourceMappingURL=chunk-c428217c.ffb1537a.js.map