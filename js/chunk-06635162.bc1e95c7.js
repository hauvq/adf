(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06635162"],{"0075":function(t,e,s){},"0a19":function(t,e,s){"use strict";var n=s("0075"),r=s.n(n);r.a},"396a":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"is":{"fetching":"Sæki pöntun","sameAsLast":"Sama og síðast","orderAdded":"Pöntun bætt í körfu!","noPastOrders":"Þú hefur ekki pantað héðan áður. Nú er tækifærið!","pleaseLogin":"Þú er ekki skráð/ur inn. Smelltu hér til að skrá þig inn og sjá eldri pantanir."},"en":{"fetching":"Fetching order","sameAsLast":"Same as last time","orderAdded":"Order added to cart!","noPastOrders":"You have not ordered from here before. Now is your chance!","pleaseLogin":"You are not logged in. Please click here to log in and see your past orders."}}'),delete t.options._Ctor}},"46f1":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"is":{"filter":"Sía","moreOptions":"Fleiri valkostir"},"en":{"filter":"Filter","moreOptions":"More Options"}}'),delete t.options._Ctor}},"4a86":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:["filter-and-options",t.onlyOneOption&&"filter-and-options--only-one-option"]},[t.hideFilter?t._e():s("div",{staticClass:"filter-and-options__item filter-and-options__filter noselect",on:{click:t.toggleFilterModal}},[s("i",{staticClass:"icon icon--sliders"}),s("span",{staticClass:"filter-and-options__filter-label"},[t._v(" "+t._s(t.$t("filter")))]),s("i",{staticClass:"filter-and-options__filter-arrow icon--arrow-down"})]),t.hideMoreOptions?t._e():s("div",{staticClass:"filter-and-options__item filter-and-options__more-options noselect",on:{click:t.toggleShowMorePopup}},[s("i",{staticClass:"icon icon--grid"}),s("span",{staticClass:"filter-and-options__more-options-label"},[t._v("\n      "+t._s(t.$t("moreOptions")))]),s("i",{staticClass:"filter-and-options__more-options-arrow icon--arrow-down"})]),s("MyProductAndSameAsLastBtns",{staticClass:"filter-and-options__item filter-and-options__my-product-same-as-last",attrs:{merchant:t.merchant,storeId:t.storeId,sameAsLastFirst:""}})],1)},r=[],o=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),a=(s("c5f6"),s("2f62")),i=s("935a"),c=s("7855");function u(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,n)}return s}function d(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?u(s,!0).forEach(function(e){Object(o["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):u(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var p={name:"FilterAndOptions",components:{MyProductAndSameAsLastBtns:c["a"]},props:{hideFilter:Boolean,hideMoreOptions:Boolean,merchant:Object,storeId:Number},computed:{onlyOneOption:function(){if(this.merchant){var t=1===this.merchant.favorite_customer_products,e=!this.merchant.hide_same_as_last;return 1===[t,e].filter(Boolean).length}}},methods:d({},Object(a["b"])(["toggleModal"]),{toggleFilterModal:function(){this.toggleModal({modalKey:i["c"],routerToReset:this.$route.fullPath})},toggleShowMorePopup:function(){this.toggleModal({modalKey:i["i"]})}})},l=p,f=(s("dab2"),s("2877")),h=s("f929"),m=Object(f["a"])(l,n,r,!1,null,"95c964d0",null);"function"===typeof h["default"]&&Object(h["default"])(m);e["a"]=m.exports},7855:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isLoading?t._e():s("div",{class:["my-product-same-as-last",t.usingBtnStyle&&"my-product-same-as-last--btns",t.sameAsLastFirst&&"my-product-same-as-last--same-as-last-first"]},[t.showMyProduct?s("div",{staticClass:"noselect my-products my-product-same-as-last__item",on:{click:t.onMyProductClick}},[s("input",{staticClass:"my-products__input",attrs:{type:"checkbox"},domProps:{checked:t.isMyProductsFiltered}}),s("span",{staticClass:"my-products__label"},[t._v(t._s(t.$t("myProducts")))])]):t._e(),t.showSameAsLast?s("SameAsLast",{staticClass:"same-as-last--no-btn my-product-same-as-last__item",attrs:{storeId:t.storeId}}):t._e()],1)},r=[],o=(s("c5f6"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"same-as-last"},[s("base-button",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hidePopup,expression:"hidePopup"}],staticClass:"same-as-last__btn primary",nativeOn:{click:function(e){return t.togglePopup(e)}}},[t.isPending?s("span",{staticClass:"pending-text"},[t._v(t._s(t.$t("fetching"))+"...")]):s("span",{staticClass:"same-as-last__title"},[s("i",{staticClass:"icon icon--time"}),s("span",[t._v(t._s(t.$t("sameAsLast")))]),s("i",{staticClass:"arrow-down"})])]),t.isPopupOpen?s("div",{staticClass:"popup"},[t.pastOrders.length?t._l(t.pastOrders,function(e){var n=e.id,r=e.date,o=e.amount;return s("div",{key:r,staticClass:"order",on:{click:function(e){return t.placeReorder(n)}}},[s("span",{staticClass:"order-date"},[t._v(t._s(r))]),s("span",{staticClass:"order-amount"},[t._v(t._s(t._f("formatISK")(o)))])])}):s("div",{class:[(!t.isLoggedIn||!t.pastOrders.length)&&"popup__not-logged-in"]},[t.isLoggedIn?s("span",{staticClass:"no-orders"},[t._v(t._s(t.$t("noPastOrders")))]):s("span",{staticClass:"order",on:{click:function(e){return t.$store.dispatch("toggleLogin")}}},[t._v(t._s(t.$t("pleaseLogin")))])])],2):t._e()],1)}),a=[],i=(s("8e6e"),s("456d"),s("768b")),c=(s("ffc1"),s("ac6a"),s("8615"),s("96cf"),s("3b8d")),u=s("bd86"),d=s("e67d"),p=s.n(d),l=s("bc3a"),f=s.n(l),h=s("2f62"),m=s("82ea");function _(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,n)}return s}function g(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?_(s,!0).forEach(function(e){Object(u["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):_(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var O={name:"SameAsLast",components:{BaseButton:m["a"]},props:{storeId:Number},data:function(){return{isPopupOpen:!1,pastOrders:[],isPending:!1}},computed:g({},Object(h["c"])(["getNettoIdByURL"]),{isLoggedIn:function(){return this.$store.state.customer.is_logged_in}}),methods:g({},Object(h["b"])(["getStoreIdURLMap"]),{togglePopup:function(){this.isPopupOpen=!this.isPopupOpen},hidePopup:function(){this.isPopupOpen=!1},placeReorder:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(e){var s,n,r,o,a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=this.$route.params.storeUrl,t.next=3,this.getStoreIdURLMap();case 3:return n=this.getNettoIdByURL(s),this.isPending=!0,t.next=7,f.a.put("/api/rest/cart",{reorder:{super_product:n,corder_id:e}});case 7:r=t.sent,o=r.data,a=o.status,i=o.message,this.isPending=!1,"success"===a?(this.$store.dispatch("loadCart"),this.$store.dispatch("notification",{type:"success",message:this.$t("orderAdded")})):this.$store.dispatch("notification",{type:"error",message:i});case 13:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),parseSuborders:function(t){return Object.values(Object.values(t)[0].items)},fetchPastOrders:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e,s,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f.a.get("/api/rest/cart/past_orders/".concat(this.storeId));case 2:e=t.sent,s=e.data,this.pastOrders=Object.entries(s[0].past_orders).map(function(t){var e=Object(i["a"])(t,2),s=e[0],r=e[1],o=r.order_on,a=r.sub_orders,c=new Date(o),u=c.toLocaleDateString("en-GB"),d=n.parseSuborders(a).map(function(t){return+t}).reduce(function(t,e){return t+e});return{id:s,date:u,amount:d}});case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),handleTouchOutside:function(){if(this.isPopupOpen)return this.hidePopup()}}),directives:{ClickOutside:p.a},watch:{isLoggedIn:function(t){t&&this.fetchPastOrders()},storeId:function(){this.isLoggedIn&&this.fetchPastOrders()}},mounted:function(){this.isLoggedIn&&this.fetchPastOrders(),window.addEventListener("touchmove",this.handleTouchOutside)},beforeDestroy:function(){window.removeEventListener("touchmove",this.handleTouchOutside)}},b=O,v=(s("f754"),s("2877")),y=s("e4c8"),P=Object(v["a"])(b,o,a,!1,null,"ea01b994",null);"function"===typeof y["default"]&&Object(y["default"])(P);var w=P.exports,j={name:"MyProductAndSameAsLastBtns",components:{SameAsLast:w},props:{usingBtnStyle:Boolean,onMyProductClick:{type:Function,default:function(){}},storeId:Number,sameAsLastFirst:Boolean,merchant:Object,isMyProductsFiltered:{type:Boolean,default:!1}},computed:{isLoading:function(){return!this.merchant},showMyProduct:function(){return 1===this.merchant.favorite_customer_products},showSameAsLast:function(){return!this.merchant.hide_same_as_last}}},L=j,k=(s("0a19"),Object(v["a"])(L,n,r,!1,null,"419c8546",null));e["a"]=k.exports},"7a67":function(t,e,s){},dab2:function(t,e,s){"use strict";var n=s("dada"),r=s.n(n);r.a},dada:function(t,e,s){},e4c8:function(t,e,s){"use strict";var n=s("396a"),r=s.n(n);e["default"]=r.a},f754:function(t,e,s){"use strict";var n=s("7a67"),r=s.n(n);r.a},f929:function(t,e,s){"use strict";var n=s("46f1"),r=s.n(n);e["default"]=r.a},ffc1:function(t,e,s){var n=s("5ca1"),r=s("504c")(!0);n(n.S,"Object",{entries:function(t){return r(t)}})}}]);
//# sourceMappingURL=chunk-06635162.bc1e95c7.js.map